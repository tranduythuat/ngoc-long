<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ng·ªçc & Long</title>
    <meta name="description" content="√Ånh Ng·ªçc & Ho√†ng Long" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content="Ng·ªçc - Long" />
    <meta property="og:description" content="√Ånh Ng·ªçc & Ho√†ng Long" />

    <meta property="og:image"
        content="https://res.cloudinary.com/storehue/image/upload/f_jpg,w_600,h_400,c_fill/v1759331217/wedding/ngoc-long/64f709d94824c27a9b35_gkmw9w.jpg">
    <meta property="og:image:width" content="600" />
    <meta property="og:image:height" content="400" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <div class="container">
        <div class="cards">
            <div class="card active" id="card-default">
                <div class="title">
                    <p class="text-1">say</p>
                    <p class="text-2">yes</p>
                    <p class="text-3">forever</p>
                </div>
                <div class="letter-img">
                    <!-- <img src="./images/g272.png" class="envelope shake-bottom" id="openVideoBtn" alt="Letter image"> -->
                    <img src="./images/IMG_3899.GIF" class="envelope" id="openVideoBtn" alt="Letter image">
                </div>
                <div class="main-text">
                    <p data-aos="fade-right" class="subtext">thi·ªáp m·ªùi tham d·ª± ti·ªác c∆∞·ªõi</p>
                    <h3 class="name-couple">√Ånh Ng·ªçc & Ho√†ng Long</h3>
                </div>
                <div class="icons">
                    <div class="icon">
                        <div class="box-img" onclick="showCard('invitation-card')">
                            <img src="./images/icons/icon1.png" alt="">
                        </div>
                        <p class="icon-text">Th∆°i gian </br> ƒë·ªãa ƒëi·ªÉm</p>
                    </div>
                    <div class="icon">
                        <div class="box-img" onclick="openMapUrl()">
                            <img src="./images/icons/icon2.png" alt="">
                        </div>
                        <p class="icon-text">B·∫£n ƒë·ªì </br>/Maps/</p>
                    </div>
                    <div class="icon">
                        <div class="box-img" onclick="showCard('album')">
                            <img src="./images/icons/icon3.png" alt="">
                        </div>
                        <p class="icon-text">Album</br> ·∫£nh c∆∞·ªõi</p>
                    </div>
                    <div class="icon">
                        <div class="box-img" onclick="showCard('rsvp')">
                            <img src="./images/icons/icon4.png" alt="">
                        </div>
                        <p class="icon-text">X√°c nh·∫≠n</br>tham d·ª±</p>
                    </div>
                    <div class="icon">
                        <div class="box-img" onclick="showCard('qrcode')">
                            <img src="./images/icons/icon5.png" alt="">
                        </div>
                        <p class="icon-text">M·ª´ng</br>c∆∞·ªõi</p>
                    </div>
                </div>
            </div>

            <div class="card" id="invitation-card">
                <div class="content">
                    <div class="label">v√†o l√∫c</div>
                    <div data-aos="fade-down" class="date-time">17h00 | 12.10.2025</div>
                    <div data-aos="fade-up" class="lunar-date">/ng√†y 21 th√°ng 08 nƒÉm ·∫§t T·ªµ/</div>

                    <div class="divider">
                        <img src="./images/g704.png" alt="">
                    </div>

                    <div class="location-label label">t·∫°i</div>
                    <div class="venue-name">Tr·ªëng ƒê·ªìng Palace</div>
                    <div class="venue-address">/S·ªë 02 L√£ng Y√™n, P. H·ªìng H√†, H√† N·ªôi/</div>

                    <div class="footer-decoration">
                        <div class="img-couple">
                            <img src="./images/g2469.png" alt="">
                        </div>
                    </div>
                </div>
                <svg onclick="backToDefault()" class="back-icon" xmlns="http://www.w3.org/2000/svg" width="30"
                    height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-move-left-icon lucide-move-left">
                    <path d="M6 8L2 12L6 16" />
                    <path d="M2 12H22" />
                </svg>
            </div>

            <div class="card scroll-box" id="album">
                <h2>Album</h2>
                <div class="album-container" id="album-container">
                    <div class="column">
                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228571/wedding/ngoc-long/BOMM7346_bxsuqi.jpg"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228571/wedding/ngoc-long/BOMM7346_bxsuqi.jpg"
                            alt="·∫£nh 9" style="height: 250px;object-fit: cover; object-position: 100% 50%;">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228570/wedding/ngoc-long/BOMM7400_fksmw3.jpg"
                            alt="·∫£nh 10" style="height: 250px;object-fit: cover; object-position: 100% 50%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228570/wedding/ngoc-long/BOMM7400_fksmw3.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228622/wedding/ngoc-long/BOMM7149_scm8po.jpg"
                            alt="·∫£nh 2"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228622/wedding/ngoc-long/BOMM7149_scm8po.jpg">


                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228569/wedding/ngoc-long/BOMM7481_nwutzm.jpg"
                            alt="·∫£nh 14" style="height: 300px;object-fit: cover; object-position: 100% 80%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228569/wedding/ngoc-long/BOMM7481_nwutzm.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228621/wedding/ngoc-long/BOMM7199_cwuzpl.jpg"
                            alt="·∫£nh 5" style="height: 280px;object-fit: cover; object-position: 100% 0%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228621/wedding/ngoc-long/BOMM7199_cwuzpl.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228620/wedding/ngoc-long/BOMM7418_kjb6h3.jpg"
                            alt="·∫£nh 6" style="height: 250px;object-fit: cover; object-position: 100% 100%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228620/wedding/ngoc-long/BOMM7418_kjb6h3.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228623/wedding/ngoc-long/BOMM7735_d3hten.jpg"
                            alt="·∫£nh 1" style="height: 280px;object-fit: cover; object-position: 100% 100%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228623/wedding/ngoc-long/BOMM7735_d3hten.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228622/wedding/ngoc-long/BOMM7698_ihswmb.jpg"
                            alt="·∫£nh 3" style="height: 300px;object-fit: cover; object-position: 100% 0%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228622/wedding/ngoc-long/BOMM7698_ihswmb.jpg">

                    </div>
                    <div class="column">
                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228571/wedding/ngoc-long/BOMM7243_gkwgk5.jpg"
                            alt="·∫£nh 8" style="object-fit: cover;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228571/wedding/ngoc-long/BOMM7243_gkwgk5.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228571/wedding/ngoc-long/BOMM7306_d1qr8v.jpg"
                            alt="·∫£nh 7" style="height: 270px;object-fit: cover; object-position: 100% 90%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228571/wedding/ngoc-long/BOMM7306_d1qr8v.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228569/wedding/ngoc-long/BOMM7332_w0uhnf.jpg"
                            alt="·∫£nh 15" style="height: 280px;object-fit: cover; object-position: 100% 90%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228569/wedding/ngoc-long/BOMM7332_w0uhnf.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228621/wedding/ngoc-long/BOMM7122_kbei5i.jpg"
                            alt="·∫£nh 4"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228621/wedding/ngoc-long/BOMM7122_kbei5i.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228570/wedding/ngoc-long/BOMM7569_hnjui0.jpg"
                            alt="·∫£nh 11" style="height: 250px;object-fit: cover; object-position: 100% 30%;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228570/wedding/ngoc-long/BOMM7569_hnjui0.jpg">


                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228625/wedding/ngoc-long/BOMM7213_uywpy5.jpg"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228625/wedding/ngoc-long/BOMM7213_uywpy5.jpg"
                            alt="·∫£nh 06" style="height:300px;object-fit: cover; object-position: 100% 0%;">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228569/wedding/ngoc-long/BOMM7087_t5trc1.jpg"
                            alt="·∫£nh 12"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228569/wedding/ngoc-long/BOMM7087_t5trc1.jpg">

                        <img src="https://res.cloudinary.com/storehue/image/upload/w_400,h_600,c_fill/v1759228569/wedding/ngoc-long/BOMM7656_msf4wa.jpg"
                            alt="·∫£nh 13" style="height: 300px;object-fit: cover;"
                            data-full="https://res.cloudinary.com/storehue/image/upload/v1759228569/wedding/ngoc-long/BOMM7656_msf4wa.jpg">
                    </div>
                </div>
                <svg onclick="backToDefault()" class="back-icon" xmlns="http://www.w3.org/2000/svg" width="30"
                    height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-move-left-icon lucide-move-left">
                    <path d="M6 8L2 12L6 16" />
                    <path d="M2 12H22" />
                </svg>
            </div>
            <div class="card" id="rsvp">
                <h2>B·∫°n s·∫Ω</h2>
                <h2>tham d·ª± ch·ª©?</h2>
                <p>D√†nh ch√∫t th·ªùi gian ƒë·ªÉ x√°c nh·∫≠n tham d·ª± gi√∫p <strong>Ng·ªçc & Long</strong> nh√©!</p>
                <form id="rsvp-form">
                    <div class="rsvp-buttons">
                        <input type="radio" id="attend" name="confirm" value="C√ì" required checked>
                        <label data-aos="fade-up" data-aos-delay="30" for="attend" class="btn-yes">C√≥</label>

                        <input type="radio" id="decline" name="confirm" value="KH√îNG" required>
                        <label data-aos="fade-up" data-aos-delay="300" for="decline" class="btn-no">Kh√¥ng</label>

                        <input type="radio" id="maybe" name="confirm" value="C√ì TH·ªÇ" required>
                        <label data-aos="fade-up" data-aos-delay="600" for="maybe" class="btn-maybe">C√≥ th·ªÉ</label>
                    </div>

                    <div class="message-section">
                        <input data-aos="fade-right" data-aos-delay="800" type="text" name="name"
                            placeholder="T√™n c·ªßa b·∫°n" required>
                        <input data-aos="fade-right" data-aos-delay="1000" type="text" name="phone"
                            placeholder="S·ªë ƒëi·ªán tho·∫°i" required>
                    </div>

                    <button data-aos="zoom-in" data-aos-delay="1400" type="submit" class="btn-send">X√°c nh·∫≠n</button>
                </form>
                <svg onclick="backToDefault()" class="back-icon" xmlns="http://www.w3.org/2000/svg" width="30"
                    height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-move-left-icon lucide-move-left">
                    <path d="M6 8L2 12L6 16" />
                    <path d="M2 12H22" />
                </svg>
            </div>
            <div class="card" id="qrcode">
                <p class="wife-name">C√¥ d√¢u √Ånh Ng·ªçc</p>
                <div class="qrcode-box">
                    <img src="./images/qrcode01.jpg" alt="">
                </div>

                <p class="husband-name">Ch√∫ r·ªÉ Ho√†ng Long</p>
                <div class="qrcode-box">
                    <img src="./images/qrcode02.jpg" alt="">
                </div>
                <svg onclick="backToDefault()" class="back-icon" xmlns="http://www.w3.org/2000/svg" width="30"
                    height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                    stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-move-left-icon lucide-move-left">
                    <path d="M6 8L2 12L6 16" />
                    <path d="M2 12H22" />
                </svg>
            </div>
        </div>
    </div>
    <div class="preview-overlay" id="previewOverlay">
        <span class="close-btn" id="closeBtn">&times;</span>
        <img id="previewImg" src="" alt="preview">
    </div>
    <!-- Overlay video -->
    <div id="videoModal" class="video-modal">
        <div class="video-content">
            <span class="close-video-btn">&times;</span>
            <video id="weddingVideo" controls preload="metadata"
                poster="https://res.cloudinary.com/storehue/image/upload/f_jpg,w_600,h_400,c_fill/v1759302950/wedding/ngoc-long/60947eb92d4ea710fe5f_bjext7.jpg">
                <source
                    src="https://yenstudio.com.vn/media/videos/ngoc-long/THI%E1%BB%86P%20C%C6%AF%E1%BB%9AI%20ONLINE%20%C3%81NH%20NG%E1%BB%8CC.mp4"
                    type="video/mp4">
                Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ video.
            </video>
        </div>
    </div>
    <script>
        const albumImages = document.querySelectorAll('.album-container img');
        const previewOverlay = document.getElementById('previewOverlay');
        const previewImg = document.getElementById('previewImg');
        const closeBtn = document.getElementById('closeBtn');
        const albumCard = document.getElementById('album-container');

        // Khi click v√†o ·∫£nh -> m·ªü preview
        albumImages.forEach(img => {
            img.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                // B1: show overlay + thumbnail (blur)
                previewOverlay.style.display = 'flex';

                previewImg.src = img.src;
                previewImg.classList.add('blur');

                // B2: t·∫°o ·∫£nh g·ªëc preload
                const fullUrl = img.dataset.full;
                console.log('fullUrl', fullUrl)
                const fullImg = new Image();
                fullImg.src = fullUrl;
                fullImg.onload = () => {
                    previewImg.src = fullUrl;
                    previewImg.classList.remove('blur');
                };
            });
        });

        // N√∫t close
        closeBtn.addEventListener('click', () => {
            previewOverlay.style.display = 'none';
            // albumCard.classList.remove('no-scroll'); 
        });

        function getFullImageUrl(url) {
            return url.replace(/\/w_\d+,h_\d+,c_[^/]+\//, "/");
        }

        // ƒê√≥ng preview -> b·∫≠t l·∫°i cu·ªôn
        function closePreview() {
            previewOverlay.style.display = 'none';
            // albumCard.classList.remove('no-scroll'); 
        }

        // Click ra ngo√†i ·∫£nh c≈©ng ƒë√≥ng
        previewOverlay.addEventListener('click', (e) => {
            if (e.target === previewOverlay) {
                closePreview();
            }
        });
    </script>
    <script>
        const modal = document.getElementById("videoModal");
        const openBtn = document.getElementById("openVideoBtn");
        const closeVideoBtn = document.querySelector(".close-video-btn");
        const video = document.getElementById("weddingVideo");

        // m·ªü video
        openBtn.onclick = () => {
            modal.style.display = "flex";
            video.play();
        };

        // ƒë√≥ng video
        closeVideoBtn.onclick = () => {
            modal.style.display = "none";
            video.pause();
            video.currentTime = 0; // reset v·ªÅ ƒë·∫ßu
        };

        // click ngo√†i khung c≈©ng ƒë√≥ng
        window.onclick = (e) => {
            if (e.target === modal) {
                modal.style.display = "none";
                video.pause();
                video.currentTime = 0;
            }
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            gsap.registerPlugin(ScrollTrigger);
            const container = document.querySelector(".album-container");
            const images = container.querySelectorAll("img");

            // Animation album
            images.forEach((img, i) => {
                gsap.from(img, {
                    opacity: 0,
                    y: i % 2 === 0 ? -50 : 50, // tr√™n / d∆∞·ªõi
                    duration: 1.5,
                    ease: "power2.out",
                    scrollTrigger: {
                        trigger: img,
                        scroller: container,
                        start: "top 90%",
                        toggleActions: "play none none reverse"
                    }
                });
            });
        });
    </script>
    <script>
        let currentCard = "card-default";

        // Kh·ªüi t·∫°o trang d·ª±a v√†o param tr√™n URL
        function initPage() {
            const urlParams = new URLSearchParams(window.location.search);
            const pageParam = urlParams.get("page");

            if (pageParam && document.getElementById(pageParam)) {
                currentCard = pageParam;
            }

            const activeCard = document.getElementById(currentCard);
            if (activeCard) {
                activeCard.classList.add("active");
                gsap.set(activeCard, { display: "flex", opacity: 1, scale: 1 });
            }
        }

        function openMapUrl() {
            const mapUrl = 'https://maps.app.goo.gl/t3E5W5VknFWsDyFx6?g_st=ipc';
            window.location.href = mapUrl;
        }

        // H√†m chuy·ªÉn card
        function showCard(id) {
            if (id === currentCard) return;

            const oldCard = document.getElementById(currentCard);
            const newCard = document.getElementById(id);

            if (!newCard) return;

            // fade out card c≈©
            gsap.to(oldCard, {
                opacity: 0,
                scale: 0.95,
                duration: 0.4,
                onComplete: () => {
                    oldCard.classList.remove("active");
                    gsap.set(oldCard, { opacity: 1, scale: 1, display: "none" });
                }
            });

            // fade in card m·ªõi
            newCard.classList.add("active");
            gsap.fromTo(newCard,
                { opacity: 0, scale: 0.95, display: "flex" },
                {
                    opacity: 1, scale: 1, duration: 0.4,
                    onComplete: () => {
                        ScrollTrigger.refresh();  // √©p t√≠nh l·∫°i v·ªã tr√≠
                    }
                }
            );

            // c·∫≠p nh·∫≠t bi·∫øn v√† URL
            currentCard = id;
            const params = new URLSearchParams(window.location.search);
            params.set("page", currentCard);
            window.history.replaceState({}, "", `${window.location.pathname}?${params}`);
            // document.body.classList.add('modal-open');
        }

        // H√†m back v·ªÅ card m·∫∑c ƒë·ªãnh
        function backToDefault() {
            showCard("card-default");
            // document.body.classList.remove('modal-open');
        }

        // -------------------------
        //  Function x·ª≠ l√Ω khi submit form
        // -------------------------
        async function handleFormSubmit(e) {
            e.preventDefault();

            const form = e.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            console.log("üöÄ ~ handleFormSubmit ~ data:", data);

            const {
                name: name,
                confirm: confirm,
                phone: phone,
            } = data;
            console.log("üöÄ ~ handleFormSubmit 2~ data:", data);

            // Th√¥ng b√°o khi b·∫Øt ƒë·∫ßu g·ª≠i
            Swal.fire({
                title: "ƒêang g·ª≠i /Sending/...",
                text: "Vui l√≤ng ch·ªù trong gi√¢y l√°t /Please wait a moment/",
                icon: "info",
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                },
            });

            const url =
                "https://script.google.com/macros/s/AKfycbwDWzGIff5LADzwdoz7gIaiBlmCIRGuGv_MG9ek_VibKSxTCk2giYsCfDJXKfhBICUHFQ/exec?sheet=sheet-1";

            try {
                const res = await fetch(url, {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: new URLSearchParams({
                        name,
                        confirm,
                        phone,
                    }),
                });

                const result = await res.json().catch(() => ({}));
                console.log("Server response:", result);

                form.reset();

                // Th√¥ng b√°o th√†nh c√¥ng
                Swal.fire({
                    title: "Th√†nh c√¥ng /Success/!",
                    text: "C·∫£m ∆°n b·∫°n ƒë√£ g·ª≠i ph·∫£n h·ªìi, th√¥ng tin ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn d√¢u r·ªÉ r·ªìi nha /Thank you for your feedback, the information has been sent to the bride and groom./",
                    icon: "success",
                    confirmButtonText: "OK",
                    confirmButtonColor: "#3f4122ff",
                });
            } catch (error) {
                console.error("Error:", error);

                // Th√¥ng b√°o l·ªói
                Swal.fire({
                    title: "L·ªói!",
                    text: "OPPS! ƒê√£ x·∫£y ra l·ªói: " + error.message,
                    icon: "error",
                    confirmButtonText: "Th·ª≠ l·∫°i",
                    confirmButtonColor: "#3f4122ff",
                });
            }
        }


        // Khi DOM load xong th√¨ kh·ªüi t·∫°o
        document.addEventListener("DOMContentLoaded", () => {
            initPage();

            const form = document.forms["rsvp-form"];
            if (form) {
                form.addEventListener("submit", handleFormSubmit);
            }
        });
    </script>
</body>

</html>